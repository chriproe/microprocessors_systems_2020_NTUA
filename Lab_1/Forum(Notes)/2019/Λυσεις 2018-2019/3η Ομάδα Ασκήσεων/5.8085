	MVI A,0Eh		;Μάσκα διακοπών
	SIM
	LXI H,0			;Συσσωρευτής δεδομένων
	MVI C,64d		;64 δεκαδικό στον μετρητή δεδομένων
	EI				;Ενεργοποίηση διακοπών
ADDR:				;Αναμονή δεδομένων
	MVI A,C
	CPI 0
	JNZ ADDR		;Έλεγχος εισόδου όλων των δεδομένων
	DI				;Απενεργοποίηση διακοπών
	DAD H			;3 φορές πρόσθεση του H-L στον εαυτό του για ολίσθηση 3 φορές αριστερά
	DAD H
	DAD H
	
	HLT


002C: JMP RST5.5

RST5.5:
	PUSH PSW
	
	MOV A,C
	ANI 00000001b	;00000001 δυαδικό για το LSB
	JPO GET4MSB		;Έλεγχος αν λάβαμε τα LSB ή τα MSB του δεδομένου
	IN PORT_IN		;Είσοδος των 4 LSB του δεδομένου
	ANI 00001111b	;00001111 δυαδικό για τα 4 LSB της πόρτας
	MOV B,A			;Προσωρινή αποθήκευση μέχρι να λάβουμε τα MSB του δεδομένου
	JMP GOT4LSB		;Επιστροφή στο πρόγραμμα μέχρι να ληφθούν τα MSB του δεδομένου
GET4MSB:			;Επεξεργασία των MSB του δεδομένου
	IN PORT_IN		;Είσοδος των 4 MSB του δεδομένου
	ANI 00001111b
	RLC				;4 φορές ολίσθηση για να τοποθετηθεί το τμήμα του δεδομένου στα MSB
	RLC				;
	RLC				;
	RLC				;
	ORA B			;Ένωση με τα LSB του δεδομένου
	
	MVI D,0
	MVI E,A
	DAD D			;Πρόσθεση δεδομένων
	DCR C			;Μείωση μετρητή
GOT4LSB:
	POP PSW
	EI
	RET
